<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body {
            font-family: "Poppins", sans-serif;
        }
    </style>
</head>

<body class="bg-gray-100 min-h-screen py-10">

    <div class="max-w-xl mx-auto bg-white p-8 shadow-lg rounded-xl">

        <h2 class="text-2xl font-semibold text-gray-700 text-center mb-6">
            Edit Profile
        </h2>

        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}

            <!-- Profile Image -->
            <div class="flex flex-col items-center">
                <img id="previewImg" src="{{ user.profile_pic.url }}"
                    class="h-28 w-28 rounded-full object-cover border mb-4 shadow" />

                <label for="profilePic" class="cursor-pointer bg-blue-600 text-white px-4 py-2 rounded-full text-sm">
                    Change Photo
                </label>

                <input type="file" id="profilePic" name="profile_pic" hidden accept="image/*"
                    onchange="previewImage(event)">
            </div>


            <!-- Full Name -->
            <label class="block mt-6 mb-2 text-gray-700">Full Name</label>
            <input type="text" name="full_name" value="{{ user.full_name }}"
                class="w-full px-4 py-2 border rounded-lg mb-4" required />

            <!-- Email -->
            <label class="block mb-2 text-gray-700">Email</label>
            <input type="email" name="email" value="{{ user.email }}" class="w-full px-4 py-2 border rounded-lg mb-4"
                required />

            <!-- Username -->
            <label class="block mb-2 text-gray-700">Username</label>
            <input type="text" name="username" value="{{ user.username }}"
                class="w-full px-4 py-2 border rounded-lg mb-4" required />

            <!-- Mobile -->
            <label class="block mb-2 text-gray-700">Mobile</label>
            <input type="number" name="mobile" value="{{ user.mobile }}" class="w-full px-4 py-2 border rounded-lg mb-4"
                minlength="10" maxlength="10" required />

            <!-- Password -->
            <label class="block mb-2 text-gray-700">Password</label>
            <input type="password" name="password" value="{{ user.password }}"
                class="w-full px-4 py-2 border rounded-lg mb-6" required />

            {% if error %}
            <p class="text-red-600 text-center mb-3">{{ error }}</p>
            {% endif %}

            <!-- Update Button -->
            <button type="submit" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition">
                Save Changes
            </button>

        </form>

        <div class="text-center mt-6">
            <a href="/index" class="text-blue-600 hover:underline">Back to Dashboard</a>
        </div>

    </div>

    <script>
        function previewImage(event) {
            const output = document.getElementById('previewImg');
            output.src = URL.createObjectURL(event.target.files[0]);
            output.onload = () => URL.revokeObjectURL(output.src);
        }
    </script>

</body>

</html>